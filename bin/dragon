#!/usr/bin/env ruby

$:.unshift File.expand_path('../../lib', __FILE__)
require 'deployer'
require 'deployer/usage'
require 'deployer/options'

if $*.empty? || $*[0] == '-h'
  puts Deployer.usage
  exit 0
end
if $*[0] == '-v'
  puts Deployer::VERSION
  exit 0
end

begin
   options = Deployer::Options.parse( Dir.pwd, $* )
rescue Deployer::Exceptions::DepfileMissing => e
   puts e.message
   exit 0
end
Deployer::Deploy.new(options).run

puts
puts "Done!"